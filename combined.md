---
layout: home

hero:
  name: "Vue Modeler"
  text: "–û–û–ü –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤–æ Vue"
  tagline: "–ù–µ—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ ‚Äî –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º. –ú–µ–Ω—å—à–µ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ ‚Äî –±–æ–ª—å—à–µ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"
  image:
    src: /logo.webp
  actions:
    - theme: brand
      text: –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
      link: /introduction/getting-started
    - theme: alt
      text: GitHub
      link: https://github.com/vue-modeler

features:
  - icon: üì¶
    title: –ú–æ–¥–µ–ª—å –≤–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
    details: –ù–µ—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ ‚Äî –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º. –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–æ –≤ –º–æ–¥–µ–ª–∏. –ú–æ–¥–µ–ª—å ‚Äî shallowReactive –æ–±—ä–µ–∫—Ç. –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Ä–∞–≤–Ω–æ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è.
  - icon: ‚ö°
    title: –î–µ–π—Å—Ç–≤–∏–µ ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç
    details: –ò–º–µ–µ—Ç —Å–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º. –°–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –º–µ—Ç–æ–¥–∞ –º–æ–¥–µ–ª–∏.
  - icon: üèõÔ∏è
    title: –û–û–ü
    details: –ú–æ–¥–µ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–ª–∞—Å—Å, –¥–µ–π—Å—Ç–≤–∏—è - —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã. –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è, –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º, –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
  - icon: üèóÔ∏è
    title: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–¥–µ–ª–µ–π –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    details: –ù–µ –Ω—É–∂–Ω–æ –¥—É–º–∞—Ç—å –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å, –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –º–æ–¥–µ–ª—å –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ‚Äî –∑–∞ —ç—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
  - icon: ‚úÇÔ∏è
    title: –ú–µ–Ω—å—à–µ –∫–æ–¥–∞
    details: –î–µ–π—Å—Ç–≤–∏–µ –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫. –í—ã –±—É–¥–µ—Ç–µ –ø–∏—Å–∞—Ç—å –º–µ–Ω—å—à–µ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.
  - icon: üß™
    title: –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    details: –ú–µ–Ω—å—à–µ –∫–æ–¥–∞ ‚Äî –º–µ–Ω—å—à–µ —Ç–µ—Å—Ç–æ–≤.
  - icon: üóúÔ∏è
    title: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä
    details: –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º –±–∞–Ω–¥–ª–∞.
  - icon: üîí
    title: –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    details: –í—Å–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –≤–Ω—É—Ç—Ä–∏, —Ç–∞–∫ –∏ –≤–Ω–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫–ª–∞—Å—Å–∞.
---

# –í–≤–µ–¥–µ–Ω–∏–µ

**Vue Modeler** ‚Äî –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ Vue.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, —Å–æ—Å—Ç–æ—è—â–µ–µ –∏–∑ –¥–≤—É—Ö –≤–∑–∞–∏–º–æ–¥–æ–ø–æ–ª–Ω—è—é—â–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫:

- **[@vue-modeler/dc](https://www.npmjs.com/package/@vue-modeler/dc)** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
- **[@vue-modeler/model](https://www.npmjs.com/package/@vue-modeler/model)** ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π (—Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

- **–ú–æ–¥–µ–ª—å –≤–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**. –ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
  –ù–µ—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ ‚Äî –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º. –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–æ –≤ –º–æ–¥–µ–ª–∏ –∏ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º. –í–Ω–µ –º–æ–¥–µ–ª–∏ –æ–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è. –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Ä–∞–≤–Ω–æ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è.

- **–î–µ–π—Å—Ç–≤–∏–µ ‚Äî –æ–±—ä–µ–∫—Ç —Å —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º**. –í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –º–æ–¥–µ–ª–∏ –î–µ–π—Å—Ç–≤–∏–µ ‚Äî —ç—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –º–µ–Ω—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Å–Ω–∞—Ä—É–∂–∏ (–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏ –¥—Ä—É–≥–∏—Ö –º–æ–¥–µ–ª—è—Ö) ‚Äî —ç—Ç–æ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º.

- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

  - –ú–æ–¥–µ–ª—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞. –ù–µ—Ç –ø—Ä—è–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –∏–∑ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ —Å–º—ã—Å–ª—É –º–æ–¥–µ–ª–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

  - –ù–µ –Ω—É–∂–Ω–æ –¥—É–º–∞—Ç—å –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å, –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –º–æ–¥–µ–ª—å –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ‚Äî –∑–∞ —ç—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–í –æ—Å–Ω–æ–≤–µ –û–û–ü**.
  –ú–æ–¥–µ–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–ª–∞—Å—Å.
  –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è, –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º, –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

- **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**.
  –í—Å–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –≤–Ω—É—Ç—Ä–∏, —Ç–∞–∫ –∏ –≤–Ω–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫–ª–∞—Å—Å–∞.

- **–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å Vue**.
–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ Vue. –ù–µ –Ω—É–∂–Ω–æ –∏–∑—É—á–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ API
–∏–ª–∏ –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**.
[@vue-modeler/model](https://www.npmjs.com/package/@vue-modeler/model) –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –º–µ–Ω—å—à–µ –∫–æ–¥–∞, —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –Ω—É–∂–Ω–æ –º–µ–Ω—å—à–µ —Ç–µ—Å—Ç–æ–≤. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –Ω–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –æ–±—ã—á–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤.

---

## –ü—Ä–∏—á–∏–Ω—ã —Å–æ–∑–¥–∞–Ω–∏—è

### –®–∞–±–ª–æ–Ω–Ω—ã–π –∫–æ–¥ –≤ –¥–µ–π—Å—Ç–≤–∏—è—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:**
  –î–µ–π—Å—Ç–≤–∏—è —á–∞—Å—Ç–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º—Å—è –∫–æ–¥–æ–º –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  —á–µ—Ä–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `isLoading`, `isPending`.
  –í —ç—Ç–æ–º –∫–æ–¥–µ –Ω–µ—Ç —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏, –Ω–æ –æ–Ω —Ä–∞–∑–¥—É–≤–∞–µ—Ç –∫–æ–¥–æ–≤—É—é –±–∞–∑—É.

**–†–µ—à–µ–Ω–∏–µ:**
 –î–µ–π—Å—Ç–≤–∏–µ ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏, –æ—Ç—Ä–∞–∂–∞—é—â–∏–º–∏ —Å—Ç–∞—Ç—É—Å –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
 `ready`, `pending`, `lock`, `abort`, `error`. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ –Ω–µ –Ω—É–∂–µ–Ω.

### –û—Ç–º–µ–Ω–∞ –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç–º–µ–Ω–∞ –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ —á–∞—Å—Ç–∞—è, –Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è.
–í—Å–µ —Ä–µ—à–∞—é—Ç —ç—Ç—É –∑–∞–¥–∞—á—É –ø–æ-—Å–≤–æ–µ–º—É, –Ω–æ –≤ –æ—Å–Ω–æ–≤–µ –ª–µ–∂–∏—Ç –æ–±—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω.
–†–∞–∑–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ —É—Å–ª–æ–∂–Ω—è—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ.

**–†–µ—à–µ–Ω–∏–µ:** –î–µ–π—Å—Ç–≤–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥—ã `lock` –∏ `abort` –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –æ—Ç–º–µ–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
–ù–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ–≥–æ.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–±–ª–µ–º:

- —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–±—ã–≤–∞—é—Ç –æ –Ω–µ–π;
- –∫–∞–∂–¥—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –µ—ë –ø–æ-—Å–≤–æ–µ–º—É;
- —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç, —á—Ç–æ  –∏—Å–∫–ª—é—á–µ–Ω–∏—è –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∫–∞–∫ –Ω—É–∂–Ω–æ;
- –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –≤—Å–µ–≥–¥–∞ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–≤—å—é –∫–æ–¥–∞.

**–†–µ—à–µ–Ω–∏–µ:** –î–µ–π—Å—Ç–≤–∏–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –∫–∞–∫ —á–∞—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è
–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ —Å–º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö –ø–æ –¥—Ä—É–≥–æ–º—É.

### –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

**–ü—Ä–æ–±–ª–µ–º–∞:**  Pinia –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω —Ñ–∞–±—Ä–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.
–¢–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ "—Ç—è–Ω–µ—Ç" –∑–∞ —Å–æ–±–æ–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞.

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞—Å—Å–æ–≤ –∏ –û–û–ü –∏–∑ –∫–æ—Ä–æ–±–∫–∏.

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –•—Ä–∞–Ω–∏–ª–∏—â–µ Pinia ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏.
–ù–æ –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–±—Ä–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —ç—Ç–æ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é Reactivity API Vue.
–ü–æ–ª—É—á–∞–µ–º –¥–≤–æ–π–Ω—É—é —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ —Ä–∞–∑–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –¥–∞–Ω–Ω—ã—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –ú–æ–¥–µ–ª–∏ ‚Äî —ç—Ç–æ shallow reactive –æ–±—ä–µ–∫—Ç—ã –∏–∑ –∫–æ—Ä–æ–±–∫–∏.
–ü—É–±–ª–∏—á–Ω—ã–µ –∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –±—É–¥—É—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã —Å–Ω–∞—Ä—É–∂–∏ –∏ –≤–Ω—É—Ç—Ä–∏
–±–µ–∑ —è–≤–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ê–ü–ò —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ Vue.

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞

## –°—Ç–∞–≤–∏–º –ø–∞–∫–µ—Ç—ã

::: code-group

```bash [Vue 3]
npm install @vue-modeler/dc@^3.0.0 @vue-modeler/model
```

```bash [Vue 2]
npm install @vue-modeler/dc@^2.0.0 @vue-modeler/model
```

:::

**[@vue-modeler/model](https://www.npmjs.com/package/@vue-modeler/model)** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.
**[@vue-modeler/dc](https://www.npmjs.com/package/@vue-modeler/dc)** –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

## –ü–æ–¥–∫–ª—é—á–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

### –ù–∞—Ç–∏–≤–Ω—ã–π Vue –ø—Ä–æ–µ–∫—Ç

::: code-group

```js [Vue 3]
import { createApp } from 'vue'
import { vueModelerDc } from '@vue-modeler/dc'

const app = createApp(App)
app.use(vueModelerDc)
app.mount('#app')
```

```js [Vue 2]
import Vue from 'vue'
import { vueModelerDc } from '@vue-modeler/dc'

Vue.use(vueModelerDc)
new Vue({
  // your app configuration
}).$mount('#app')
```

:::

### Nuxt –ø—Ä–æ–µ–∫—Ç

–ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π—Ç–µ –ø–ª–∞–≥–∏–Ω –¥–ª—è Nuxt –≤ –ø–∞–ø–∫–µ `plugins`

```typescript
// plugins/vue-modeler-dc.ts
import { vueModelerDc } from '@vue-modeler/dc'

export default defineNuxtPlugin((nuxtApp) => {
  nuxtApp.vueApp.use(vueModelerDc)
})
```

–í—Å—ë –≥–æ—Ç–æ–≤–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã!

# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ —Å–¥–µ–ª–∞–µ–º –ø—Ä–æ—Å—Ç—É—é –∑–∞–¥–∞—á—É:** —Å—á–µ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è –∏ —É–º–µ–Ω—å—à–∞—Ç—å—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö `increment +` –∏ `decrement -`. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –±—É–¥–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏. –°–¥–µ–ª–∞–µ–º –∏—Ö –¥–æ–ª–≥–∏–º–∏ –ø–æ 2 —Å–µ–∫—É–Ω–¥—ã. –í–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è, –∫–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞–µ–º —Å–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –≤ 0 –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–Ω–æ–ø–∫–µ `reset`. –ù–∞–ø–∏—à–µ–º —Ç–µ—Å—Ç—ã –Ω–∞ –º–æ–¥–µ–ª—å.

–≠—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ –¥—Ä—É–≥–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏.

## 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å –º–æ–¥–µ–ª–∏

`Counter` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–ª–∞—Å—Å —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã–π –æ—Ç `ProtoModel`, –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `_count` –∏ –º–µ—Ç–æ–¥—ã `increment`, `decrement` –∏ `reset`. –ü–æ–º–µ—Ç–∏–º –∏—Ö –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@action`, —á—Ç–æ–±—ã –æ–Ω–∏ —Å—Ç–∞–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏, –∏ –º—ã –º–æ–≥–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º–∏ –∫–∞–∫ —Å —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏.

–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç `ProtoModel` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª—É–∂–µ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –∑–¥–µ—Å—å.

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç API —Å–µ—Ä–≤–∏—Å–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–ª—è –Ω–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

```typescript
// getting-started/counter.ts
import { ProtoModel, action } from '@vue-modeler/model'

interface ApiService {
  inc: (currentCount: number) => Promise<number>
  dec: (currentCount: number) => Promise<number>
}

export class Counter extends ProtoModel {
  protected _count = 0

  constructor(
    private apiService: ApiService,
  ) {
    super()
  }

  get count(): number {
    return this._count
  }

  @action async increment(): Promise<void> {
    this._count = await this.apiService.inc(this._count)
  }

  @action async decrement(): Promise<void> {
    this._count = await this.apiService.dec(this._count)
  }

  @action async reset(): Promise<void> {
    this._count = 0
  }
}
```

## 2. –î–µ–ª–∞–µ–º –∑–∞–≥–ª—É—à–∫—É API —Å–µ—Ä–≤–∏—Å–∞

–°–¥–µ–ª–∞–µ–º –∑–¥–µ—Å—å –ø—Ä–æ—Å—Ç–æ –∑–∞–≥–ª—É—à–∫—É –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
–ú–µ—Ç–æ–¥—ã –ê–ü–ò —Å–µ—Ä–≤–∏—Å–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—à–∏–±–∫–∏ —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –æ—à–∏–±–∫–∞–º–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ.

–û—à–∏–±–∫–∏ –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏ –≤ –¥–µ–π—Å—Ç–≤–∏—è—Ö –º–æ–¥–µ–ª–∏, –µ—Å–ª–∏ —ç—Ç–æ –Ω—É–∂–Ω–æ –ø–æ –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–µ. –ù–æ —Å–µ–π—á–∞—Å –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ, –ø–æ—ç—Ç–æ–º—É –æ—à–∏–±–∫–∏ –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º.

```typescript
// getting-started/api-service.ts
const timeout = 2000

export const apiService = {
  inc: async (currentCount: number): Promise<number> => {
    return new Promise((resolve, reject) => {
      if (Math.random() < 0.5) {
        reject(new Error('increment failed'))
        
        return 
      }
      
      setTimeout(
        () => resolve(currentCount + 1),
        timeout,
      )
    })
  },
  dec: async (currentCount: number): Promise<number> => {
    return new Promise((resolve, reject) => {
      if (Math.random() > 0.5) {
        reject(new Error('decrement failed'))
        
        return 
      }
      
      setTimeout(
        () => resolve(currentCount - 1),
        timeout,
      )
    })
  }
}
```

## 3. –°–æ–∑–¥–∞–µ–º –º–æ–¥–µ–ª—å –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–£ –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞ –º–æ–¥–µ–ª–∏ –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `model`, –æ–Ω —Å–æ–∑–¥–∞–µ—Ç –º–æ–¥–µ–ª—å.

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ, –Ω—É–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—ë –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –§—É–Ω–∫—Ü–∏—è `provider` —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä –º–æ–¥–µ–ª–∏.

–ü—Ä–æ–≤–∞–π–¥–µ—Ä –º–æ–¥–µ–ª–∏ —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–µ—Ç –º–æ–¥–µ–ª—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ, –∞ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –∑–¥–µ—Å—å.

```typescript
// getting-started/dc.ts
import { provider } from '@vue-modeler/dc'
import { Counter } from './counter'
import { apiService } from './api-service'

export const useCounter = provider(() => Counter.model(apiService))
```

## 4. –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–æ–¥–µ–ª—å –≤ Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

–ü–æ–ª—É—á–∞–µ–º –º–æ–¥–µ–ª—å –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏–≤—ã—á–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º, —á–µ—Ä–µ–∑ `const counter = useCounter`. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –æ–±—ã—á–Ω—ã–π composable.

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ.  –í—Å—è –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞ –≤ –º–æ–¥–µ–ª–∏. –°–æ—Å—Ç–æ—è–Ω–∏—è –∏ –æ—à–∏–±–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—É—á–∞–µ–º –∏–∑ —Å–∞–º–∏—Ö  –¥–µ–π—Å—Ç–≤–∏–π.

```vue
// getting-started/app-counter.vue

<script setup lang="ts">
import { useCounter } from './dc'

const counter = useCounter()

const isBusy = computed(() => 
  counter.increment.isPending 
  || counter.decrement.isPending
  || counter.reset.isPending
)

const error = computed(() => 
  counter.increment.error?.cause 
  || counter.decrement.error?.cause
  || counter.reset.error?.cause
)
</script>

<template>
  <div>
    <div v-if="error">
      {{ error }}
    </div>
    <div v-else>
      Current value: {{ counter.count }}
    </div>

    <button 
      :disabled="isBusy"
      @click="counter.increment.exec()"
    >
      {{ counter.increment.isPending ? 'increment ...' : 'increment +' }}
    </button>
    
    <button 
      :disabled="isBusy"
      @click="counter.decrement.exec()"
    >
      {{ counter.decrement.isPending ?   'decrement ...' : 'decrement -' }}
    </button>
    
    <button 
      :disabled="isBusy"
      @click="counter.reset.exec()"
    >
      {{ counter.reset.isPending ? '...' : 'reset' }}
    </button>
  </div>
</template>

```

## 5. –¢–µ—Å—Ç—ã

```typescript
// getting-started/test-counter.ts
import { test, expect } from 'vitest'
import { useCounter } from './dc'

test('counter', () => {
  const counter = useCounter()
  expect(counter.count).toBe(0)
})
```

# –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**[@vue-modeler/dc](https://www.npmjs.com/package/@vue-modeler/dc)** ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ [shared composable](https://github.com/vuejs/rfcs/blob/master/active-rfcs/0041-reactivity-effect-scope.md#example-a-shared-composable).

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –º–æ–¥–µ–ª–µ–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤:

- –£–ø—Ä–æ—â–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –û—Ç–¥–µ–ª—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã MVVM, DDD, SOLID

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚ö° **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: —Å–æ–∑–¥–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –æ–Ω–∏ –Ω—É–∂–Ω—ã
- üóëÔ∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ**: —É–¥–∞–ª—è–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- üîß **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ destructor**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `destructor` –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ
- üíæ **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã**: –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã

::: tip
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ö—Ä–∞–Ω–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –ù–û –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (autowire). –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤–Ω–µ–¥—Ä—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ –∏–ª–∏ —Å–ª–æ–µ.
:::

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É "—Å–æ–∑–¥–∞–π –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é, —É–¥–∞–ª–∏ –∫–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–Ω–æ":

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–±—Ä–∏–∫–∏** ‚Äî –≤—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ —Ñ–∞–±—Ä–∏–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞, –ø–æ–ª—É—á–∞–µ—Ç–µ shared composable
2. **–°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞** ‚Äî —ç–∫–∑–µ–º–ø–ª—è—Ä —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏
3. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** ‚Äî –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏—è—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä
4. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—á–∏—Ç–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä
5. **–û—á–∏—Å—Ç–∫–∞** ‚Äî –∫–æ–≥–¥–∞ —Å—á–µ—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 0, —ç–∫–∑–µ–º–ø–ª—è—Ä —É–¥–∞–ª—è–µ—Ç—Å—è

## –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–±—Ä–∏–∫–∏

`provider` —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ñ–∞–±—Ä–∏–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–æ–∑–¥–∞–µ—Ç shared composable, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.

–§–∞–±—Ä–∏–∫–∞ ‚Äî –ø—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ª—é–±–æ–≥–æ —Ç–∏–ø–∞.

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ö—Ä–∞–Ω–∏—Ç —Ç–æ, —á—Ç–æ –≤–µ—Ä–Ω—É–ª–∞ —Ñ–∞–±—Ä–∏–∫–∞. –ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –≤–Ω–µ–¥—Ä—è–µ—Ç.

```typescript
import { provider } from '@vue-modeler/dc';

const useDependency = provider(() => {
  // –≤–∞—à–∞ —Ñ–∞–±—Ä–∏–∫–∞ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
  return {
    // —ç–∫–∑–µ–º–ø–ª—è—Ä —Å –º–µ—Ç–æ–¥–∞–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏
  };
});


// —Ç–∞–∫ —Ç–æ–∂–µ –º–æ–∂–Ω–æ
const useSymbol = provider(() => new Symbol('dependency'));
const useNumber = provider(() => 10);
const useTrue = provider(() => true);

// –ø–µ—Ä–µ–¥–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
const useObject = provider(() => new SomeModel(
  useDependency(),
  useSymbol(),
  useNumber(),
  useTrue()
));

```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ —à–∞–±–ª–æ–Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```html
<template>
  <div>{{ model.state }}</div>
</template>

<script setup lang="ts">
import { useDependency } from '@/providers/myDependency';

const model = useObject(); // –ø–æ–ª—É—á–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä
</script>
```

## –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã

–ë—ã–≤–∞—é—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–≤–∏—Å—ã —É—Ä–æ–≤–Ω—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫—ç—à–∏ –∏–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è.

–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –æ–ø—Ü–∏—é `persistentInstance: true` –≤ —Ñ—É–Ω–∫—Ü–∏—é `provider`.

```typescript
const usePersistentService = provider(
  () => new MyService(),
  { persistentInstance: true } // –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
);
```

–û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤:

- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –¥–∞–∂–µ –ø–æ—Å–ª–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ü–æ–ª–µ–∑–Ω—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ —É—Ä–æ–≤–Ω—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫—ç—à–µ–π –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:

```typescript
// –≤–ª–æ–∂–µ–Ω–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –≤–º–µ—Å—Ç–µ —Å –æ—Å–Ω–æ–≤–Ω—ã–º
const useNestedService = provider(() => new NestedService());

const usePersistentService = provider(
  () => new MainService(useNestedService()),
  { persistentInstance: true }
);
```

::: warning
–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç —É–¥–∞–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
:::

–î–ª—è SSR –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∞ —Å—Ç–∞—Ä—ã–π —É–¥–∞–ª—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º.

# –ú–æ–¥–µ–ª—å

–ú–æ–¥–µ–ª—å –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–¥–∞–Ω–Ω—ã–µ) –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–¥–µ–π—Å—Ç–≤–∏—è) –≤ –µ–¥–∏–Ω—ã–π —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ –∏ –æ—á–∏—â–∞–µ—Ç –∏—Ö –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏.

::: tip
**–ú–æ–¥–µ–ª—å = –¥–∞–Ω–Ω—ã–µ + –¥–µ–π—Å—Ç–≤–∏—è + —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏**
:::

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è

–í Vue Modeler —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —á–µ—Ç–∫–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –ø–æ–Ω—è—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—è–º–∏.

**ProtoModel** ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π. –≠—Ç–æ "–¥–≤–∏–∂–æ–∫" —Å–∏—Å—Ç–µ–º—ã –º–æ–¥–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–π:

- —Å–æ–∑–¥–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ —Å–≤–æ–π `EffectScope`;  
- –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –º–µ—Ç–æ–¥—ã —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏ `@action` –≤ –¥–µ–π—Å—Ç–≤–∏—è –∏ –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –∫ –Ω–∏–º –¥–æ—Å—Ç—É–ø;  
- –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–æ–¥–µ–ª–µ–π ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `model`;  
- –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã `watch` –∏ `computed`, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ EffectScope;  
- –æ—á–∏—â–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏.

**–ö–ª–∞—Å—Å –º–æ–¥–µ–ª–∏** ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω—ã–π –∫–ª–∞—Å—Å, —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã–π –æ—Ç `ProtoModel`, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏. –≠—Ç–æ "—à–∞–±–ª–æ–Ω" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –º–æ–¥–µ–ª–µ–π.

–ö–ª–∞—Å—Å –º–æ–¥–µ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:

- **–°—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ—Å—Ç–æ—è–Ω–∏—è**: –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏—Ç –º–æ–¥–µ–ª—å;  
- **–î–µ–π—Å—Ç–≤–∏—è**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@action`, –∫–æ—Ç–æ—Ä—ã–µ –º–µ–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–¥–µ–ª–∏;  
- **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É**: –ø—Ä–∞–≤–∏–ª–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏;  
- **–ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏ –∏ –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞**: –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

**–ú–æ–¥–µ–ª—å** ‚Äî —ç—Ç–æ shallow reactive –æ–±—ä–µ–∫—Ç —Å–æ —Å–≤–æ–∏–º EffectScope, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–µ–π—Å—Ç–≤–∏—è ‚Äî —ç—Ç–æ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å–æ —Å–≤–æ–∏–º —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

## –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏ –≤—ã–∑–æ–≤–∏—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `model`.

```typescript
// counter.ts
import { ProtoModel, action } from '@vue-modeler/model'

export class Counter extends ProtoModel {
  ...
  constructor(
    private apiService: SomeApiService,
  ) {
    super()
  }
  ...
}

// –≠—Ç–æ –º–æ–¥–µ–ª—å
const counterModel = Counter.model(new ApiService())

// –≠—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞. –ù–ï –º–æ–¥–µ–ª—å.
const counter = new Counter(new ApiService())

```

::: tip
 –ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —á–µ—Ä–µ–∑ `new`, —Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞.  –≠–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ ‚Äî —ç—Ç–æ –Ω–µ –º–æ–¥–µ–ª—å, –æ–Ω –Ω–µ —Ä–µ–∞–∫—Ç–∏–≤–µ–Ω, –∏ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ –æ–±—ä–µ–∫—Ç—ã.  
:::

–ú–µ—Ç–æ–¥ `model` ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –æ–Ω –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ `ProtoModel` –∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤–æ –≤—Å–µ—Ö –∫–ª–∞—Å—Å–∞—Ö –º–æ–¥–µ–ª–∏.
`model` –∫–æ–ø–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–ª–∞—Å—Å–∞, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –≤ TS –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º `model` —Å–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫ –Ω–µ–º—É —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `createModel`. `createModel` ‚Äî —ç—Ç–æ —Ñ–∞–±—Ä–∏–∫–∞ –º–æ–¥–µ–ª–∏. –û–Ω–∞ –¥–µ–ª–∞–µ—Ç –∏–∑ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ `shallowReactive` –æ–±—ä–µ–∫—Ç –∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤ –ø—Ä–æ–∫—Å–∏, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –≤ –æ–±—ä–µ–∫—Ç—ã.

–î–ª—è –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞–µ–≤ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ–π –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥. –£ –Ω–µ–≥–æ –±—É–¥–µ—Ç —Å–≤–æ—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

–ß—Ç–æ–±—ã –Ω–æ–≤—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–ª –º–æ–¥–µ–ª—å, —Å–æ–∑–¥–∞–π—Ç–µ  —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –∫ –Ω–µ–º—É —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `createModel`.

```typescript wrap=false {8,10,12}
// counter.ts
import { ProtoModel, action } from '@vue-modeler/model'

export class Counter extends ProtoModel {
  protected _count = 0

  static customFactoryModel(startValue: number, apiService: SomeApiService): Model<Counter> {
    // 1. —Å–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞
    const counter = new Counter(apiService)
    // 2. —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    counter._count = startValue
    // 3. –¥–µ–ª–∞–µ–º –º–æ–¥–µ–ª—å –∏–∑ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞
    return Counter.createModel(counter)
  }

  constructor(
    private apiService: SomeApiService,
  ) {
    super()
  }
  ...
}

// 4. –ø–æ–ª—É—á–∞–µ–º –º–æ–¥–µ–ª—å –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏
const customCounter = Counter.customFactoryModel(10, new ApiService())
const defaultCounter = Counter.model(new ApiService())
```

## –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

–í—Å–µ –º–æ–¥–µ–ª–∏ –∏–º–µ—é—Ç `destructor`, –æ–Ω –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ `ProtoModel`. –û–Ω —É–¥–∞–ª–∏—Ç –≤—Å–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ effect Scope.  –ï–≥–æ –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å, –∫–æ–≥–¥–∞ –º–æ–¥–µ–ª—å –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–∞. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä [@vue-modeler/dc](https://www.npmjs.com/package/@vue-modeler/dc), —Ç–æ –Ω–µ –Ω—É–∂–Ω–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑–æ–≤–µ—Ç `destructor` –∏ —É–¥–∞–ª–∏—Ç –º–æ–¥–µ–ª—å, –∫–æ–≥–¥–∞ –æ–Ω–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏, –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å–≤–æ–π –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä.

::: warning
 –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–π—Ç–µ `super.destructor`, –∏–Ω–∞—á–µ –ø–æ–ª—É—á–∏—Ç–µ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
:::

## –°–≤–æ–π—Å—Ç–≤–∞

–ó–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ ‚Äî —ç—Ç–æ –∏ –µ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–¥–µ–ª–∏, –ø–æ—ç—Ç–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ–æ—Ç–¥–µ–ª–∏–º–æ –æ—Ç –º–æ–¥–µ–ª–∏. –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

–ü—É–±–ª–∏—á–Ω—ã–µ –∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–∏, vue composition api –Ω–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –¢–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ `model` ‚Äî shallow reactive –æ–±—ä–µ–∫—Ç. –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –Ω–µ –±—É–¥—É—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏.

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ vue composition api —è–≤–Ω–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–≤–æ–π—Å—Ç–≤, –µ—Å–ª–∏  

- —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –Ω–∏–º–∏ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –º–æ–¥–µ–ª–∏,  
- –Ω—É–∂–Ω–∞ –≥–ª—É–±–æ–∫–∞—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤,  
- –Ω—É–∂–Ω–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞.

–î–µ–ª–∞–π—Ç–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º–∏, –¥–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ —á–µ—Ä–µ–∑ –≥–µ—Ç—Ç–µ—Ä—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä—è–º—ã—Ö –º—É—Ç–∞—Ü–∏–π —Å–≤–æ–π—Å—Ç–≤ –∏ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

```typescript
// counter.ts
import { ProtoModel, action } from '@vue-modeler/model'

export class Counter extends ProtoModel {
  
  // –û–±–∞ —Å–≤–æ–π—Å—Ç–≤–∞ –±—É–¥—É—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã –≤ –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vue Composition API –Ω–µ –Ω—É–∂–Ω–æ.
  public value1 = 0
  protected _value2 = 0

  constructor(
    // —ç—Ç–æ —Ç–æ–∂–µ —Å–≤–æ–π—Å—Ç–≤–æ. –û–Ω–æ –Ω–µ –±—É–¥–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ.
    private apiService: SomeApiService,
  ) {
    super()

    // –≠—Ç–æ—Ç –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –ù–ï –†–ê–ë–û–¢–ê–ï–¢,
    // –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ this –µ—â–µ –Ω–µ shallow reactive
    this.watch(
      () => this.value1,
      () => {
        console.log('value1 changed', this.value1)
      }
    )
  }

  // –ó–¥–µ—Å—å this —É–∂–µ shallow reactive –º–æ–¥–µ–ª—å, 
  // –ø–æ—ç—Ç–æ–º—É this.value2 –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ. 
  get value2(): number {
    return this._value2
  }
  ...
}

```

## –î–µ–π—Å—Ç–≤–∏—è –∏ –º–µ—Ç–æ–¥—ã

**–î–µ–π—Å—Ç–≤–∏–µ** ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@action`, –∫–æ—Ç–æ—Ä—ã–π –º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã—Ö.

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–æ–≤ –∏ —Å–Ω–∞—Ä—É–∂–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª [–î–µ–π—Å—Ç–≤–∏—è](/guides/action).

## –ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏

–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞–µ—Ç –º–µ—Ç–æ–¥ `watch` ‚Äî —ç—Ç–æ –æ–±–µ—Ä—Ç–∫–∞ –≤–æ–∫—Ä—É–≥  vue composition API. –û–Ω —Å–æ–∑–¥–∞—Å—Ç –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å, –ø—Ä–∏–≤—è–∂–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç –∫ effect scope –º–æ–¥–µ–ª–∏, —Å–æ—Ö—Ä–∞–Ω–∏—Ç `stop handler` –∏ –≤–µ—Ä–Ω—ë—Ç –µ–≥–æ.
–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π `stop handler` –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏ –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ.

::: warning
 –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ watch –∏–ª–∏ computed –Ω–∞–ø—Ä—è–º—É—é –∏–∑ vue composition api. –≠—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —É—Ç–µ—á–∫–∞–º –ø–∞–º—è—Ç–∏.
:::

–í –º–æ–¥–µ–ª–∏ –µ—Å—Ç—å 3 –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:

- —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏,  
- —Å–≤–æ–π—Å—Ç–≤–∞,
- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏.

**–î–ª—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏–ª–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏**  –≤—ã–∑—ã–≤–∞–π—Ç–µ `watch` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ. C —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –ø—Ä–æ–±–ª–µ–º –Ω–µ –±—É–¥–µ—Ç.  

–°–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –µ—Å—Ç—å –æ–¥–Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å: –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ this –µ—â–µ –Ω–µ shallow reactive, –ø–æ—ç—Ç–æ–º—É —Å–≤–æ–π—Å—Ç–≤–∞ –µ—â–µ –Ω–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã. –ß—Ç–æ–±—ã –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–ª, –Ω—É–∂–Ω–æ —è–≤–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º —á–µ—Ä–µ–∑ vue composition api.

```typescript
// counter.ts
import { ref } from 'vue'
import { ProtoModel, action } from '@vue-modeler/model'

export class Counter extends ProtoModel {
  protected _count = 0
  protected _countForWatch = ref(0)
  
  constructor(
    someDependency: OtherReactiveObject,
    ...
  ) {
    super()

    // –≠—Ç–æ—Ç –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –ù–ï –†–ê–ë–û–¢–ê–ï–¢,
    // –ø–æ—Ç–æ–º—É —á—Ç–æ this –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –µ—â–µ –Ω–µ shallow reactive
    this.watch(
      () => this._count,
      () => {
        console.log('count changed', this._count)
      }
    )

    // –≠—Ç–æ—Ç –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç,
    // –ø–æ—Ç–æ–º—É —á—Ç–æ this._countForWatch —Å—Ä–∞–∑—É —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π
    this.watch(
      () => this._countForWatch,
      () => {
        console.log('countForWatch changed', this._countForWatch.value)
      }
    )
    
    // –≠—Ç–æ—Ç –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç,
    // –ø–æ—Ç–æ–º—É —á—Ç–æ someDependency.someProperty —Å—Ä–∞–∑—É —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π
    this.watch(
      () => someDependency.someProperty,
      () => {
        console.log('someDependency.someProperty changed', someDependency.someProperty)
      }
    )
  }
  ...
}
```

**–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏** –ø–æ—è–≤–ª—è—é—Ç—Å—è, –∏—Å—á–µ–∑–∞—é—Ç, –º–µ–Ω—è—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ. –ù–∞–ø—Ä–∏–º–µ—Ä,  
—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é dto, –¥–µ–ª–∞–µ—Ç –∏–∑ dto –∫–æ–ª–ª–µ–∫—Ü–∏—é –º–æ–¥–µ–ª–µ–π, –∏ —Å–ª–µ–¥–∏—Ç –∑–∞ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª—å—é. –ï—Å–ª–∏ —É –≤–∞—Å –ø–æ—Ö–æ–∂–∏–π —Å–ª—É—á–∞–π, —Ç–æ:

1. –≤—ã–∑–æ–≤–∏—Ç–µ `watch` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–∏,
2. —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ `stop handler`
3. –≤—ã–∑–æ–≤–∏—Ç–µ `stop handler` –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

::: warning
 –ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å –º–æ–¥–µ–ª—å, —Ç–æ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –∏ –±—É–¥–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –º–æ–¥–µ–ª—å. –°–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –Ω–µ —Å–º–æ–∂–µ—Ç –µ—ë —É–¥–∞–ª–∏—Ç—å.

 –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –ø—É–Ω–∫—Ç—ã 2 –∏  3, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å, –∏–Ω–∞—á–µ –±—É–¥–µ—Ç —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏.
:::

```typescript
// counter.ts
import { ref } from 'vue'
import { ProtoModel, action } from '@vue-modeler/model'

export class Repository extends ProtoModel {
  
  private _models: Set<Model<SomeModel>> = new Set()
  private _stopWatchers: Map<Model<SomeModel>, WatchStopHandle> = new Map()

  constructor(
    private fetchDtos: () => Promise<Dto[]>,
    private modelFactory: (dto: Dto) => Model<SomeModel>,
  ) {
    super()

    this.init()
  }
  ...

  @action async init(): Promise<void> {
    const dtos = await this.fetchDtos()
    for (const dto of dtos) {
      // 1. —Å–æ–∑–¥–∞–µ–º –º–æ–¥–µ–ª—å
      const model = this.modelFactory(dto)
      // 2. —Å–æ–∑–¥–∞–µ–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è
      const stopWatcher = this.watch(
        () => model.property,
        () => {
          console.log('model changed', model)
        }
      })

      // 3. —Å–æ—Ö—Ä–∞–Ω—è–µ–º –º–æ–¥–µ–ª—å
      this._models.add(model)
      // 4. —Å–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è
      this._stopWatchers.set(model, stopWatcher)
    }
  }

  @action async destroyModel(model: Model<SomeModel>): Promise<void> {
    // 1. —É–¥–∞–ª—è–µ–º –º–æ–¥–µ–ª—å
    this._models.delete(model)
   
    const stopWatcher = this._stopWatchers.get(model)
    if (stopWatcher) {
      // 2. –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ
      stopWatcher()
    }
    // 3. —É–¥–∞–ª—è–µ–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è
    this._stopWatchers.delete(model)
  }

  destructor() {
    for (const [model, stopWatcher] of this._stopWatchers) {
      stopWatcher()
    }

    this._models.clear()
    this._stopWatchers.clear()
    super.destructor()
  }
}
```

## –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º

–ö–ª–∞—Å—Å –º–æ–¥–µ–ª–∏ ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–ª–∞—Å—Å, —Ç—É—Ç —Ä–∞–±–æ—Ç–∞—é—Ç –≤—Å–µ –ø–æ–¥—Ö–æ–¥—ã –û–û–ü. –î–µ–π—Å—Ç–≤–∏—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –ø–æ—Ç–æ–º–∫–∞—Ö.

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –º–æ–¥–µ–ª—å –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞. –ó–¥–µ—Å—å –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π, —ç—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å:

- –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã: –ê–ü–ò —Å–µ—Ä–≤–∏—Å—ã, –∫–ª–∏–µ–Ω—Ç—ã –∫ –ë–î  
- –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–æ—è UI: —Ä–æ—É—Ç–µ—Ä, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ UI  
- –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏ –∏–ª–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞: Pinia,  vuex, –ª—é–±—ã–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

–ú–æ–¥–µ–ª—å –Ω–µ —É–º–µ–µ—Ç –≤–Ω–µ–¥—Ä—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∑–∞ —ç—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API

–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ —Å–≤–æ–π—Å—Ç–≤ –º–æ–¥–µ–ª–∏ —Å–º. –≤ —Ä–∞–∑–¥–µ–ª–µ [API –º–æ–¥–µ–ª–∏](/api/proto-model).

# –î–µ–π—Å—Ç–≤–∏–µ (Action)

**–í [@vue-modeler/model](https://www.npmjs.com/package/@vue-modeler/model) –¥–µ–π—Å—Ç–≤–∏–µ ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞**, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏—é –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ–¥–µ–ª–∏, –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∏ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

## –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

- –î–µ–π—Å—Ç–≤–∏–µ –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞ –º–æ–¥–µ–ª–∏ —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@action`. –ú–µ—Ç–æ–¥ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã—Ö.
- –ú–µ—Ç–æ–¥ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–¥–µ–ª–∏.
- –î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –º–æ–¥–µ–ª–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–±—ä—è–≤–ª–µ–Ω–æ.
- –î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –ª—é–±–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–æ–¥–µ–ª–∏.

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –¥–∞–µ—Ç —Ä—è–¥ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤:

- —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- –æ—Ç–º–µ–Ω–∞, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–∞–∫ –º–µ—Ç–æ–¥—ã ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å "–≤–µ–ª–æ—Å–∏–ø–µ–¥" ;
- —Ä–∞–±–æ—Ç–∞ —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫  –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞;
- –∫–æ–¥ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ–¥–µ–ª–∏;
- –æ–±—ä–µ–º –∫–æ–¥–∞ –º–µ–Ω—å—à–µ –≤ —Ä–∞–∑—ã –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏.

–í–æ—Ç –Ω–∞–≥–ª—è–¥–Ω—ã–π –ø—Ä–∏–º–µ—Ä.

**–ë–µ–∑ –¥–µ–π—Å—Ç–≤–∏–π (—à–∞–±–ª–æ–Ω–Ω—ã–π –∫–æ–¥):**

```typescript
export const useCart = defineStore('cart', () => {
  const items = shallowRef<Product[]>([])
  // –§–ª–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
  const isAddingProduct = ref(false)
  const addError = ref<Error | null>(null)

  async function addProduct(product: Product): Promise<void> {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
    if (isAddingProduct.value) return
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
    isAddingProduct.value = true
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
    addError.value = null
    // –í—ã–ø–æ–ª–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é
    try {
      await api.addToCart(product)
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –º–æ–¥–µ–ª–∏
      items.value = [...items.value, product]
    } catch (error) {
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—à–∏–±–∫—É
      addError.value = error as Error
      // –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –¥–∞–ª—å—à–µ
      throw error
    } finally {
      // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
      isAddingProduct.value = false
    }
  }

  return {
    items,
    isAddingProduct,
    addError,
    addProduct
  }
})

const cart = useCart()
await cart.addProduct(newProduct)

watch(cart.isAddingProduct, (value) => {
  console.log('isAddingProduct', value)
})

watch(cart.addError, (value) => {
  console.log('addError', value)
})
```

–†–∞–∑–±–µ—Ä–µ–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ–º –∫–æ–¥–µ.

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–∏—à–µ—Ç —à–∞–±–ª–æ–Ω–Ω—ã–π –∫–æ–¥ –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:

1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
2. –ì–æ—Ç–æ–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
4. –ï—Å–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
    1. **—É—Å–ø–µ—à–Ω–æ** ‚Äî –∫–æ–º–º–∏—Ç–∏—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –º–æ–¥–µ–ª—å
    2. **–Ω–µ —É—Å–ø–µ—à–Ω–æ** ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ –æ—à–∏–±–∫–∏, –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–ª–∏  –ø—Ä–æ–∫–∏–¥—ã–≤–∞–µ—Ç—Å—è –¥–∞–ª—å—à–µ
5. –£–¥–∞–ª—è–µ—Ç —Ñ–ª–∞–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏

–ï—Å—Ç—å –æ—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏:

- –ù—É–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å, —á—Ç–æ–±—ã –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞, –ø–æ–∫–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≤—ã–∑–æ–≤, –∏–Ω–∞—á–µ –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
- –°–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—é –Ω—É–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å.

–≠—Ç–æ —Ç–æ–∂–µ —à–∞–±–ª–æ–Ω–Ω—ã–π –∫–æ–¥, –Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ —Ä–∞–∑–Ω–æ–º—É –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —ç—Ç–∏ —Å–ª—É—á–∞–∏.
–¢–∞–∫–æ–π –∫–æ–¥ —Å–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å.

–î–µ–π—Å—Ç–≤–∏–µ-–æ–±—ä–µ–∫—Ç –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è –≤—Å—ë, –≤–∫–ª—é—á–∞—è –æ—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ (–ø. 2, 3, 4.1), –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏. –ö–æ–¥ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –Ω–µ –Ω—É–∂–Ω–æ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥.

**–¢–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏:**

```typescript
class Cart extends ProtoModel {
    protected _items: Product[] = [] 
    ...

    get items(): Product[] {
      return this._items 
    }
    
    @action async addProduct(product: Product): Promise<void> {
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã
        await this.apiService.addToCart(product);
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–µ–ª–∏
        this._items.push(product);
    }
}

const cart = Cart.model(apiService);

await cart.addProduct.exec(newProduct);

watch(cart.addProduct.isPending, (value) => {
  console.log('isPending', value)
})

watch(cart.addProduct.error, (value) => {
  console.log('error', value)
})
```

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è

–†–∞–∑–±–µ—Ä–µ–º –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É.

```javascript
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å –º–æ–¥–µ–ª–∏.
//  –ù–µ –∑–∞–±—ã–≤–∞–µ–º —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç ProtoModel. –≠—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.
class CartModel extends ProtoModel {
    ...

    // –î–µ–∫–æ—Ä–∞—Ç–æ—Ä @action —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –±—É–¥–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ.
    @action async addProduct(product: Product): Promise<void> {
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã
        await this.apiService.addToCart(product);
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–µ–ª–∏
        this._items.push(product);
    }
}

// –°–æ–∑–¥–∞–µ–º –º–æ–¥–µ–ª—å
const cartModel = CartModel.model(apiService)

// –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ
await cartModel.addProduct.exec(newProduct);

// –°–ª–µ–¥–∏–º –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
watch(
  cartModel.addProduct.isPending,
  console.log
)
// –°–ª–µ–¥–∏–º –∑–∞ –æ—à–∏–±–∫–∞–º–∏
watch(
  cartModel.addProduct.error,
  console.log
)
```

### –û–±—ä—è–≤–ª—è–µ–º

–ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º `@action` –∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º—É –º–µ—Ç–æ–¥—É, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã—Ö.

```typescript
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å –º–æ–¥–µ–ª–∏. –ù–µ –∑–∞–±—ã–≤–∞–µ–º —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç ProtoModel.
class CartModel extends ProtoModel {
    ...
    @action async addProduct(product: Product): Promise<void> {
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã
        await this.apiService.addToCart(product);
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–µ–ª–∏
        this._items.push(product);
    }
}
```

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è:

- –ö–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç `ProtoModel`.
- –ú–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `Promise<void>`.
- –ú–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `@action`.

### –ü–æ–ª—É—á–∞–µ–º –∫–∞–∫ –æ–±—ä–µ–∫—Ç

**–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äî —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ –∏ –æ–±—ä–µ–∫—Ç.** –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º—è –º–µ—Ç–æ–¥–∞, –∫–æ—Ç–æ—Ä–æ–µ –±—ã–ª–æ –æ–±—ä—è–≤–ª–µ–Ω–æ –∫–∞–∫ –¥–µ–π—Å—Ç–≤–∏–µ. TypeScript –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø—ã, –ø–æ—ç—Ç–æ–º—É –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –∏ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ–º .exec()
await cartModel.addProduct.exec(productId);

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - TypeScript –±—É–¥–µ—Ç —Ä—É–≥–∞—Ç—å—Å—è
await cartModel.addProduct(productId);
```

**–í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –º–æ–¥–µ–ª–∏ TypeScript –≤–∏–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–µ –∫–∞–∫ –º–µ—Ç–æ–¥**, –Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –æ–±—ä–µ–∫—Ç. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º –∏ –º–µ—Ç–æ–¥–∞–º –¥–µ–π—Å—Ç–≤–∏—è –∏ –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ —Ç–∏–ø–æ–≤, –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ –º–æ–¥–µ–ª–∏ `this.action(this.addProduct)`. –û–Ω –≤–µ—Ä–Ω–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏, –∏ –ø—Ä–æ–±–ª–µ–º —Å TypeScript –Ω–µ –±—É–¥–µ—Ç. –¢–µ–ø–µ—Ä—å –¥–µ–π—Å—Ç–≤–∏–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –≤–æ –≤–Ω–µ—à–Ω–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ: –≤—ã–ø–æ–ª–Ω—è—Ç—å, —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ —Ç.–ø.

```typescript
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –î–ª—è TypeScript this.addProduct - —ç—Ç–æ –º–µ—Ç–æ–¥,
//  –∏ —É –Ω–µ–≥–æ –Ω–µ—Ç —Å–≤–æ–π—Å—Ç–≤
const error = this.addProduct.error;

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –ø–æ–ª—É—á–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –∫–∞–∫ –æ–±—ä–µ–∫—Ç, –∏ —É –Ω–µ–≥–æ –µ—Å—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞
const error = this.action(this.addProduct).error;
```

–î–µ–π—Å—Ç–≤–∏–µ-–æ–±—ä–µ–∫—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–æ–¥–µ–ª–∏. –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö.

```typescript

const addProductAction = cart.addProduct;
await addProductAction.exec(productId);

watch(addProductAction.isPending, (value) => {
  console.log('isPending', value)
})

watch(addProductAction.error, (value) => {
  console.log('error', value)
})
```

### –í—ã–ø–æ–ª–Ω—è–µ–º

**–í–æ –≤–Ω–µ—à–Ω–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ** –ø–æ–ª—É—á–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ-–æ–±—ä–µ–∫—Ç —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ –∏ –≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ `exec(...)`.
–û–Ω –∫–æ–ø–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä—É –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ–º .exec()
await cartModel.addProduct.exec(productId);

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - TypeScript –±—É–¥–µ—Ç —Ä—É–≥–∞—Ç—å—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –∑–¥–µ—Å—å –¥–µ–π—Å—Ç–≤–∏–µ —É–∂–µ –æ–±—ä–µ–∫—Ç
await cartModel.addProduct(productId);
```

**–í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –º–æ–¥–µ–ª–∏** –µ—Å—Ç—å 2 —Å–ø–æ—Å–æ–±–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ:

1. –ø–æ–ª—É—á–∏—Ç—å –∫–∞–∫ –æ–±—ä–µ–∫—Ç —á–µ—Ä–µ–∑ `this.action(this.addProduct)` –∏ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ `exec(...)`.
2. –≤—ã–∑–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –∫–∞–∫ –º–µ—Ç–æ–¥ –º–æ–¥–µ–ª–∏: `this.addProduct(newProduct)`. –≠—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ TS "–≤–∏–¥–∏—Ç" –¥–µ–π—Å—Ç–≤–∏–µ –∫–∞–∫ –º–µ—Ç–æ–¥ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞.

```typescript
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ —Ç–∞–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç,
// –ø–æ—Ç–æ–º—É —á—Ç–æ TypeScript –≤–∏–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–µ –∫–∞–∫ –º–µ—Ç–æ–¥,
// –∞ –Ω–µ –∫–∞–∫ –æ–±—ä–µ–∫—Ç.
await this.addProduct.exec(productId);

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø–æ–ª—É—á–∞–µ–º –∫–∞–∫ –æ–±—ä–µ–∫—Ç, –≤—ã–∑—ã–≤–∞–µ–º exec
await this.action(this.addProduct).exec(productId);

// ‚úÖ –¢–∞–∫ —Ç–æ–∂–µ –º–æ–∂–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const addProductAction = this.action(this.addProduct);
await addProductAction.exec(productId);
if (addProductAction.error) {
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
}

// ‚úÖ –≠—Ç–æ —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –í—ã–∑—ã–≤–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –∫–∞–∫ –º–µ—Ç–æ–¥ –º–æ–¥–µ–ª–∏.
await this.addProduct(productId);
```

::: warning
–í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –≤—ã–∑–æ–≤ `this.addProduct()` –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞, –Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –Ω–µ —Ç–∞–∫. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@action` –ø–æ–¥–º–µ–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –∏ "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º" –ø–æ–ª—É—á–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –∫–∞–∫ –æ–±—ä–µ–∫—Ç –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `exec(...)`. –ü–æ—ç—Ç–æ–º—É `try...catch` –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è. –°–º. [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](/guides/action#–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º-–æ—à–∏–±–∫–∏).
:::

–î–µ–π—Å—Ç–≤–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ, –ø–æ—ç—Ç–æ–º—É `exec(...)` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Promise<void>`. –í—ã –Ω–µ –ø–æ–ª—É—á–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ –∏—Ö –≤–µ—Ä–Ω—É—Ç—å. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ: –¥–µ–π—Å—Ç–≤–∏–µ –¥–æ–ª–∂–Ω–æ –º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–¥–µ–ª–∏, –∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.

### –°–ª–µ–¥–∏–º –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

–î–µ–π—Å—Ç–≤–∏–µ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º –∏–∑ –ø—è—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π, –∫–∞–∂–¥–æ–µ –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —Å–≤–æ–π—Å—Ç–≤–µ:

- **`isReady`** ‚Äî –¥–µ–π—Å—Ç–≤–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é (–Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
- **`isPending`** ‚Äî –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç
- **`isAbort`** ‚Äî –¥–µ–π—Å—Ç–≤–∏–µ –±—ã–ª–æ –æ—Ç–º–µ–Ω–µ–Ω–æ
- **`isLock`** ‚Äî –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–æ
- **`error`** ‚Äî –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å —Å –æ—à–∏–±–∫–æ–π (—Å–æ–¥–µ—Ä–∂–∏—Ç `ActionError` –∏–ª–∏ `null`)

–í—Å–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è. –í –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –∏–∑ –±—É–ª–µ–≤—ã—Ö —Å–≤–æ–π—Å—Ç–≤ (`isReady`, `isPending`, `isAbort`, `isLock`) –±—É–¥–µ—Ç `true`, –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî `false`. –°–≤–æ–π—Å—Ç–≤–æ `error` –º–æ–∂–µ—Ç –±—ã—Ç—å `null` –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏.

–í–Ω—É—Ç—Ä–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏: watch, watchEffect, computed.

```vue

<template>
  <div>
    <p>isPending: {{ cartModel.addProduct.isPending }}</p>
    <p>error: {{ error.message }}</p>
  </div>
</template>

<script setup>
const cartModel = useCartModel()
watch(
  () => cartModel.addProduct.isPending,
  (value) => console.log(value)
)


const error = computed(() => cartModel.addProduct.error?.cause ?? cartModel.delProduct.error?.cause )
</script>
```

–í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –º–æ–¥–µ–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `this.watch` –∏ `this.computed`.
–≠—Ç–∏ –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Å–µ—Ö –º–æ–¥–µ–ª—è—Ö.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏–µ–º, –µ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∫–∞–∫ –æ–±—ä–µ–∫—Ç.

```typescript
class CartModel extends ProtoModel {
  ...
  constructor () {
    super()
    this.watch(
      () => this.action(this.addProduct).isPending,
      (value) => console.log('addProduct isPending', value)
    )
  }

  @action async addProduct(product: Product): Promise<void> {
    ...
  }
}
```

–ï—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥—Ä—É–≥–æ–π –º–æ–¥–µ–ª–∏, —Ç–æ –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏–µ —É–∂–µ –æ–±—ä–µ–∫—Ç, –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø–æ –∏–º–µ–Ω–∏ –º–µ—Ç–æ–¥–∞.

```typescript
class CartModel extends ProtoModel {
  ...
  constructor (
    readonly user: Model<User>
  ) {
    super()
    this.watch(
      () => this.user.login.isPending,
      (isPending) => console.log('user login isPending', isPending)
    )
  }
}
```

### –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏

–õ—é–±–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Å –æ—à–∏–±–∫–æ–π. –ò—Ö –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 3 –≥—Ä—É–ø–ø—ã:

- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è** –≤–æ–∑–Ω–∏–∫–∞—é—Ç –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ –∏–ª–∏ —Å–ª–æ–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã: –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –Ω–µ—Ö–≤–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–∞, –ª—é–±–æ–π –Ω–µ—É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –ë–î.
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –æ—à–∏–±–∫–∏** –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è —Å–∞–º–∏–º –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–æ–º JS: RangeError, ReferenceError, SyntaxError, TypeError, URIError, EvalError.
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—à–∏–±–∫–∏** –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã –¥–µ–π—Å—Ç–≤–∏—è –∏–ª–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –≤ –Ω–µ–≤–µ—Ä–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

–°–∏—Å—Ç–µ–º–Ω—ã–µ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–Ω–∏–∫–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –û–Ω–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é –∏  –ø–∞–¥–µ–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–π–º–∞–Ω—ã, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —á—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

–ò—Å–∫–ª—é—á–µ–Ω–∏—è - –æ–∂–∏–¥–∞–µ–º—ã, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –∫–∞–∫–æ–º-—Ç–æ –≤–∏–¥–µ.

–ú–µ—Ç–æ–¥ `exec(...)` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –∏—Ö –≤ `ActionError` –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Å–≤–æ–π—Å—Ç–≤–µ `error` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏. –°–≤–æ–π—Å—Ç–≤–æ `error` –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É.
`ActionError` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.

```typescript
class CartModel extends ProtoModel {
  ...

  @action async addProduct(product: Product): Promise<void> {
    // —ç—Ç–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ 
    throw new Error('Product not found')

    // –∑–¥–µ—Å—å —Ç–æ–∂–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ, –µ—Å–ª–∏ —Ç–∞–º –æ—à–∏–±–∫–∞ 
    await this.apiService.addProduct(product)
  }
}
```

–¢–∞–∫ –∫–∞–∫ `exec` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è, —Ç–æ try...catch –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–≤–æ–π—Å—Ç–≤–æ `error` –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è.

```typescript
try {
  // ‚ùå —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
  // exec –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ,
  // —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤ error,
  // –∑–∞–≤–µ—Ä—à–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∫ –æ–±—ã—á–Ω–æ.
  await action.exec()
} catch (error) {
  // ‚ùå —Å—é–¥–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ø–∞–¥–µ–º.
  console.error('Error:', error.message)
}


// ‚úÖ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç. 
await action.exec()
// ‚úÖ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤–æ–π—Å—Ç–≤–æ error.
if (action.error?.cause instanceof HttpError) {
  console.error('HTTP error:', action.error.cause.message)
}
if (action.error?.cause instanceof BusinessError) {
  console.error('Business error:', action.error.cause.message)
}
```

–î–µ–π—Å—Ç–≤–∏—è –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –ï—Å–ª–∏ –≤ –¥–æ—á–µ—Ä–Ω–µ–º –¥–µ–π—Å—Ç–≤–∏–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞, –æ–Ω–∞ —Ç–∞–º –∏ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–∞ –≤ `exec`. –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –∫–∞–∫-–±—É–¥—Ç–æ –æ—à–∏–±–∫–∏ –Ω–µ –±—ã–ª–æ. –ß—Ç–æ–±—ã –ø—Ä–µ—Ä–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –Ω—É–∂–Ω–æ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –º–µ—Ç–æ–¥–æ–º `ActionError.throwCause()` –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫.

```typescript

class ChildModel extends ProtoModel {
  ...
  @action async childAction(): Promise<void> {
    throw new Error('Child error')
  }
}

class ParentModel extends ProtoModel {
  constructor (
    readonly child: Model<ChildModel>
  ) {
    super()
  }

  @action async parentAction(): Promise<void> {
    await this.child.childAction.exec()
    // –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
    this.child.childAction.error?.throwCause()
    // –∏–ª–∏ —Ç–∞–∫, –Ω–æ –±–æ–ª—å—à–µ –∫–æ–¥–∞. –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å throwCause().
    if (this.child.childAction.error) {
      throw this.child.childAction.error.cause
    }
  }
}
```

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã `exec` –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª –æ—à–∏–±–∫—É, —Ç–æ –º–æ–∂–Ω–æ:

1. —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –∫–ª–∞—Å—Å –æ—à–∏–±–æ–∫,
2. —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç  `ActionInternalError`,
3. –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ –Ω–µ–≥–æ –∏ –∫–∏–¥–∞—Ç—å –¥–∞–ª—å—à–µ.

–î–ª—è —Ç–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π try...catch –ø—Ä–æ—Ü–µ—Å—Å.
–ù–æ —Ç–∞–∫ –ª—É—á—à–µ –Ω–µ –¥–µ–ª–∞—Ç—å.

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏—Ö–≤–∞—Ç –≤ `exec` –∏ —Å–≤–æ–π—Å—Ç–≤–æ `error`, —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤.

::: tip

- `exec` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, try...catch –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
- –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–≤–æ–π—Å—Ç–≤–æ `error` –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è.
- –¥–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞ –æ—à–∏–±–∫–∏ –¥–∞–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `throwCause()`.
:::

### –û—Ç–º–µ–Ω—è–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

–î–ª—è –æ—Ç–º–µ–Ω—ã –µ—Å—Ç—å –º–µ—Ç–æ–¥ `abort()`. –ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–º–µ–Ω—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ `AbortController`.

–ß—Ç–æ–±—ã –º–µ—Ç–æ–¥ `abort()` —Ä–∞–±–æ—Ç–∞–ª, –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —É—Å–ª–æ–≤–∏—è:

1. –ü—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç –º–µ—Ç–æ–¥–∞ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ç–∏–ø `AbortController`.
2. –ê—Ä–≥—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º, —á—Ç–æ–±—ã TypeScript –Ω–µ —Ç—Ä–µ–±–æ–≤–∞–ª –µ–≥–æ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `exec`.
3. –ö–æ–¥ –≤–Ω—É—Ç—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π `AbortController`, –∏–Ω–∞—á–µ –æ—Ç–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è.

–†–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–æ —Ç–∞–∫:

1. **–ú–µ—Ç–æ–¥ `exec`**:
   - —Å–æ–∑–¥–∞–µ—Ç `AbortController`, –µ—Å–ª–∏ –æ–Ω –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω —è–≤–Ω–æ, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–ª–∏;
   - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è;
   - –ø–µ—Ä–µ–¥–∞–µ—Ç `AbortController` –≤ –∏—Å—Ö–æ–¥–Ω—ã–π –º–µ—Ç–æ–¥, –≤—Å–µ–≥–¥–∞ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç–µ.
2. **–ò—Å—Ö–æ–¥–Ω—ã–π –º–µ—Ç–æ–¥**:
   - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π `AbortController` –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –∏ –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.
3. **–ú–µ—Ç–æ–¥ `abort`**:
   - –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `abort` –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–º `AbortController`, —ç—Ç–æ –ø—Ä–æ–≤–æ—Ü–∏—Ä—É–µ—Ç –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.
4. **–ú–µ—Ç–æ–¥ `exec`**:
   - –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ;
   - —É–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–º–µ–Ω–æ–π;
   - –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `abort`, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–∏—á–∏–Ω—É –æ—Ç–º–µ–Ω—ã –≤ —Å–≤–æ–π—Å—Ç–≤–µ `abortReason`;
   - –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ  –∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `abort`.

```typescript
class CartModel extends ProtoModel {
  ...
  @action async addProduct(
    product: Product,
    abortController = new AbortController(), // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
  ): Promise<void> {
    await this.apiService.addProduct(product, abortController) // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
  }

  // ‚ùå –¥–ª—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è abort() –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π AbortController
  @action async deleteProduct(productId: number): Promise<void> {
    const abortController = new AbortController() // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
    await this.apiService.deleteProduct(productId, abortController) // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
  }
}

const cartModel = CartModel.model(apiService)
await cartModel.addProduct.exec(product)

// –û—Ç–º–µ–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é
cartModel.addProduct.abort()
```

–ë—ã–≤–∞—é—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–∑—ã–≤–∞–µ—Ç –¥—Ä—É–≥–æ–µ, –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–æ —Å–æ–≥–ª–∞—Å–Ω–æ –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–µ. –¢–æ–≥–¥–∞ –¥–æ—á–µ—Ä–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Ç–æ–∂–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–ß—Ç–æ–±—ã —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. –¥–æ—á–µ—Ä–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–æ `AbortController`;
2. `AbortController` –±—ã–ª –æ–±—â–∏–º ‚Äî –µ–≥–æ –Ω—É–∂–Ω–æ —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –¥–æ—á–µ—Ä–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º.

```typescript

class SomeModel extends ProtoModel {

  @action childAction(abortController?: AbortController ): Promise<void> {
    ...
  }
  
  @action parentAction(abortController?: AbortController ): Promise<void> {
    // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ. –ü–µ—Ä–µ–¥–∞–µ–º abortController –¥–∞–ª—å—à–µ, –æ–Ω –æ–±—â–∏–π 
    await this.action(this.childAction).exec(abortController)
  }
}
```

# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã

–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤ Vue Modeler –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±—ä—è–≤–ª–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º.

## –î–µ–∫–æ—Ä–∞—Ç–æ—Ä @action

–û—Å–Ω–æ–≤–Ω–æ–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@action` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π:

```typescript
import { ProtoModel } from 'vue-modeler'
import { action } from 'vue-modeler/decorator'

export class UserModel extends ProtoModel {
  users = []

  @action async fetchUsers(): Promise<void> {
    const response = await fetch('/api/users')
    this.users = await response.json()
  }

  @action async createUser(userData: any): Promise<void> {
    const response = await fetch('/api/users', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(userData)
    })
    const newUser = await response.json()
    this.users.push(newUser)
  }
}
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä

–î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@action` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:

1. **–°–æ–∑–¥–∞–Ω–∏–µ –æ–±–µ—Ä—Ç–∫–∏**: –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**: –î–æ–±–∞–≤–ª—è–µ—Ç —Ñ–ª–∞–≥ `__action_original_method__` –∫ –º–µ—Ç–æ–¥—É
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥–µ–ª—å—é**: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –º–µ—Ç–æ–¥ –∫ —Å–∏—Å—Ç–µ–º–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

### –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ä–∞–±–æ—Ç–∞

```typescript
// –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞
@action async fetchUsers(): Promise<void> {
  // –í–∞—à –∫–æ–¥
}

// –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤:
async fetchUsers(...args: any[]): Promise<void> {
  return this.action(this.fetchUsers).exec(...args)
}

// –° –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:
fetchUsers[Action.actionFlag] = originalMethod
```

## –¢–∏–ø—ã –º–µ—Ç–æ–¥–æ–≤ —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    const response = await fetch('/api/users')
    this.users = await response.json()
  }

  @action async createUser(userData: any): Promise<void> {
    const response = await fetch('/api/users', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(userData)
    })
    const newUser = await response.json()
    this.users.push(newUser)
  }
}
```

### –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

```typescript
export class UserModel extends ProtoModel {
  @action normalSyncMethod(): number {
    return 42
  }

  @action syncMethodWithData(data: string): string {
    return `Processed: ${data}`
  }
}
```

### –ú–µ—Ç–æ–¥—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUser(id: number): Promise<void> {
    const response = await fetch(`/api/users/${id}`)
    const user = await response.json()
    this.selectedUser = user
  }

  @action async updateUser(id: number, updates: any): Promise<void> {
    const response = await fetch(`/api/users/${id}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(updates)
    })
    const updatedUser = await response.json()
    this.updateUserInList(updatedUser)
  }
}
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞

### –¢–æ–ª—å–∫–æ –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ –∫–ª–∞—Å—Å–∞

```typescript
export class UserModel extends ProtoModel {
  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞
  @action async fetchUsers(): Promise<void> {
    // –õ–æ–≥–∏–∫–∞
  }

  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –Ω–µ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞
  const fetchUsers = @action async () => {
    // –õ–æ–≥–∏–∫–∞
  }
}
```

### –¢–æ–ª—å–∫–æ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π

```typescript
export class UserModel extends ProtoModel {
  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - —Ñ—É–Ω–∫—Ü–∏—è
  @action async fetchUsers(): Promise<void> {
    // –õ–æ–≥–∏–∫–∞
  }

  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –Ω–µ —Ñ—É–Ω–∫—Ü–∏—è
  @action users = []
}
```

### –¢–æ–ª—å–∫–æ –≤ –∫–ª–∞—Å—Å–∞—Ö ProtoModel

```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –≤ –∫–ª–∞—Å—Å–µ ProtoModel
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    // –õ–æ–≥–∏–∫–∞
  }
}

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –Ω–µ –≤ –∫–ª–∞—Å—Å–µ ProtoModel
export class RegularClass {
  @action async fetchUsers(): Promise<void> {
    // –õ–æ–≥–∏–∫–∞
  }
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏

### –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏

```typescript
export abstract class BaseModel extends ProtoModel {
  @action async handleRequest<T>(request: Promise<T>): Promise<T> {
    this.loading = true
    try {
      return await request
    } finally {
      this.loading = false
    }
  }
}

export class UserModel extends BaseModel {
  users = []

  @action async fetchUsers(): Promise<void> {
    const users = await this.handleRequest(
      fetch('/api/users').then(res => res.json())
    )
    this.users = users
  }
}
```

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

```typescript
export class BaseUserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    // –ë–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
  }
}

export class AdminUserModel extends BaseUserModel {
  @action async fetchUsers(): Promise<void> {
    // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
    await super.fetchUsers()
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
  }
}
```

## –¢–∏–ø–∏–∑–∞—Ü–∏—è —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏

### –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```typescript
interface CreateUserData {
  name: string
  email: string
  role?: string
}

export class UserModel extends ProtoModel {
  @action async createUser(userData: CreateUserData): Promise<void> {
    const response = await fetch('/api/users', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(userData)
    })
    const newUser = await response.json()
    this.users.push(newUser)
  }
}
```

### –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

```typescript
interface User {
  id: number
  name: string
  email: string
}

export class UserModel extends ProtoModel {
  @action async fetchUser(id: number): Promise<User> {
    const response = await fetch(`/api/users/${id}`)
    return await response.json()
  }

  @action async validateEmail(email: string): Promise<boolean> {
    const response = await fetch('/api/validate-email', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email })
    })
    const result = await response.json()
    return result.isValid
  }
}
```

## –í–ª–æ–∂–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### –í—ã–∑–æ–≤ –¥—Ä—É–≥–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    const response = await fetch('/api/users')
    this.users = await response.json()
  }

  @action async fetchUserDetails(userId: number): Promise<void> {
    const response = await fetch(`/api/users/${userId}/details`)
    const details = await response.json()
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ—Ç–∞–ª–µ–π
  }

  @action async fetchAllUserData(): Promise<void> {
    // –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    await this.fetchUsers()
    
    // –ó–∞—Ç–µ–º –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–µ—Ç–∞–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    for (const user of this.users) {
      await this.fetchUserDetails(user.id)
    }
  }
}
```

### –£—Å–ª–æ–≤–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    const response = await fetch('/api/users')
    this.users = await response.json()
  }

  @action async processUsers(): Promise<void> {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥—Ä—É–≥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
    if (this.fetchUsers.isReady) {
      // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
      for (const user of this.users) {
        await this.processUser(user)
      }
    } else {
      throw new Error('Users not loaded')
    }
  }

  private async processUser(user: any): Promise<void> {
    // –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  }
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞—Ö

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    try {
      const response = await fetch('/api/users')
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}: ${response.statusText}`)
      }
      
      this.users = await response.json()
    } catch (error) {
      // –û—à–∏–±–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ action.error
      console.error('Failed to fetch users:', error)
      throw error
    }
  }
}
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—à–∏–±–∫–∏

```typescript
export class UserModel extends ProtoModel {
  @action async createUser(userData: any): Promise<void> {
    try {
      // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
      if (!userData.name || !userData.email) {
        throw new Error('Name and email are required')
      }

      const response = await fetch('/api/users', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(userData)
      })

      if (!response.ok) {
        throw new Error(`Failed to create user: ${response.statusText}`)
      }

      const newUser = await response.json()
      this.users.push(newUser)
    } catch (error) {
      console.error('Failed to create user:', error)
      throw error
    }
  }
}
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

```typescript
export class UserModel extends ProtoModel {
  // ‚úÖ –•–æ—Ä–æ—à–æ - –≥–ª–∞–≥–æ–ª—ã –≤ –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤–µ
  @action async fetchUsers(): Promise<void> { }
  @action async createUser(): Promise<void> { }
  @action async updateUser(): Promise<void> { }
  @action async deleteUser(): Promise<void> { }

  // ‚ùå –ü–ª–æ—Ö–æ - —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ
  @action async users(): Promise<void> { }
  @action async data(): Promise<void> { }
}
```

### 2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

```typescript
export class UserModel extends ProtoModel {
  // ‚úÖ –•–æ—Ä–æ—à–æ - –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ, –æ–¥–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
  @action async fetchUsers(): Promise<void> {
    const response = await fetch('/api/users')
    this.users = await response.json()
  }

  @action async createUser(userData: any): Promise<void> {
    const response = await fetch('/api/users', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(userData)
    })
    const newUser = await response.json()
    this.users.push(newUser)
  }

  // ‚ùå –ü–ª–æ—Ö–æ - —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
  @action async handleUsers(): Promise<void> {
    // –ó–∞–≥—Ä—É–∑–∫–∞, —Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ ‚Äî –≤—Å–µ –≤ –æ–¥–Ω–æ–º –º–µ—Ç–æ–¥–µ
  }
}
```

### 3. –¢–∏–ø–∏–∑–∞—Ü–∏—è

```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ - —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
interface User {
  id: number
  name: string
  email: string
}

interface CreateUserData {
  name: string
  email: string
}

export class UserModel extends ProtoModel {
  users: User[] = []

  @action async fetchUsers(): Promise<void> {
    const response = await fetch('/api/users')
    this.users = await response.json()
  }

  @action async createUser(userData: CreateUserData): Promise<void> {
    const response = await fetch('/api/users', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(userData)
    })
    const newUser: User = await response.json()
    this.users.push(newUser)
  }
}
```

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    try {
      const response = await fetch('/api/users')
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}: ${response.statusText}`)
      }
      
      this.users = await response.json()
    } catch (error) {
      console.error('Failed to fetch users:', error)
      
      // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É
      if (error instanceof TypeError) {
        throw new Error('Network error - check your connection')
      }
      
      throw error
    }
  }
}
```

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

Vue Modeler –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—É—é —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—à–∏–±–∫–∞–º–∏ –≤ –¥–µ–π—Å—Ç–≤–∏—è—Ö.

## –¢–∏–ø—ã –æ—à–∏–±–æ–∫

Vue Modeler –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫:

### ActionError

–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π:

```typescript
import { ActionError } from 'vue-modeler'

// –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –æ—à–∏–±–∫–∏
const error = new ActionError('Custom error message')
```

### ActionInternalError

–û—à–∏–±–∫–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

```typescript
import { ActionInternalError } from 'vue-modeler'

// –û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ API
throw new ActionInternalError('Action decorator is not applied to the method')
```

### ActionStatusConflictError

–û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–µ–π—Å—Ç–≤–∏–π:

```typescript
import { ActionStatusConflictError } from 'vue-modeler'

// –û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ–±—Ä–∞–∑–æ–º
throw new ActionStatusConflictError(
  'fetchUsers',
  'pending',
  'ready'
)
```

### ActionUnexpectedAbortError

–û—à–∏–±–∫–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–π –æ—Ç–º–µ–Ω—ã –¥–µ–π—Å—Ç–≤–∏–π:

```typescript
import { ActionUnexpectedAbortError } from 'vue-modeler'

// –û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–π –æ—Ç–º–µ–Ω–µ –¥–µ–π—Å—Ç–≤–∏—è
throw new ActionUnexpectedAbortError('fetchUsers', 'ready')
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    try {
      const response = await fetch('/api/users')
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}: ${response.statusText}`)
      }
      
      this.users = await response.json()
    } catch (error) {
      // –û—à–∏–±–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ action.error
      console.error('Failed to fetch users:', error)
      throw error // –ü–µ—Ä–µ–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ UI
    }
  }
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫ –≤ UI

```vue
<template>
  <div>
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—à–∏–±–∫–∏ -->
    <div v-if="userModel.fetchUsers.isError" class="error">
      <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
      <p>{{ userModel.fetchUsers.error?.message }}</p>
      <button @click="retryFetch">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <ul v-else>
      <li v-for="user in userModel.users" :key="user.id">
        {{ user.name }}
      </li>
    </ul>
  </div>
</template>

<script setup lang="ts">
const retryFetch = async () => {
  userModel.fetchUsers.resetError()
  await userModel.fetchUsers.exec()
}
</script>
```

## –°–±—Ä–æ—Å –æ—à–∏–±–æ–∫

### –†—É—á–Ω–æ–π —Å–±—Ä–æ—Å

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    // –õ–æ–≥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
  }

  async retryWithReset() {
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
    if (this.fetchUsers.isError) {
      this.fetchUsers.resetError()
    }

    await this.fetchUsers.exec()
  }
}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –ø—Ä–∏ –Ω–æ–≤–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    // –û—à–∏–±–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–æ–≤–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
    const response = await fetch('/api/users')
    this.users = await response.json()
  }
}
```

## –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—à–∏–±–∫–∏

```typescript
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
class UserNotFoundError extends Error {
  constructor(userId: number) {
    super(`User with id ${userId} not found`)
    this.name = 'UserNotFoundError'
  }
}

class ValidationError extends Error {
  constructor(field: string, message: string) {
    super(`Validation error in ${field}: ${message}`)
    this.name = 'ValidationError'
  }
}

export class UserModel extends ProtoModel {
  @action async fetchUser(id: number): Promise<void> {
    try {
      const response = await fetch(`/api/users/${id}`)
      
      if (response.status === 404) {
        throw new UserNotFoundError(id)
      }
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}: ${response.statusText}`)
      }
      
      const user = await response.json()
      this.selectedUser = user
    } catch (error) {
      console.error('Failed to fetch user:', error)
      throw error
    }
  }

  @action async createUser(userData: any): Promise<void> {
    try {
      // –í–∞–ª–∏–¥–∞—Ü–∏—è
      if (!userData.name) {
        throw new ValidationError('name', 'Name is required')
      }
      
      if (!userData.email) {
        throw new ValidationError('email', 'Email is required')
      }

      const response = await fetch('/api/users', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(userData)
      })

      if (!response.ok) {
        throw new Error(`Failed to create user: ${response.statusText}`)
      }

      const newUser = await response.json()
      this.users.push(newUser)
    } catch (error) {
      console.error('Failed to create user:', error)
      throw error
    }
  }
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫

```vue
<template>
  <div>
    <div v-if="userModel.fetchUser.isError" class="error">
      <div v-if="isUserNotFoundError" class="not-found">
        <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω</h3>
        <p>{{ userModel.fetchUser.error?.message }}</p>
        <button @click="goBack">–ù–∞–∑–∞–¥</button>
      </div>
      
      <div v-else-if="isNetworkError" class="network-error">
        <h3>–û—à–∏–±–∫–∞ —Å–µ—Ç–∏</h3>
        <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É</p>
        <button @click="retryFetch">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
      </div>
      
      <div v-else class="general-error">
        <h3>–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞</h3>
        <p>{{ userModel.fetchUser.error?.message }}</p>
        <button @click="retryFetch">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'

const isUserNotFoundError = computed(() => {
  return userModel.fetchUser.error?.name === 'UserNotFoundError'
})

const isNetworkError = computed(() => {
  return userModel.fetchUser.error instanceof TypeError
})

const retryFetch = async () => {
  userModel.fetchUser.resetError()
  await userModel.fetchUser.exec(userId.value)
}

const goBack = () => {
  // –õ–æ–≥–∏–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞
}
</script>
```

## –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

### –ü—Ä–æ—Å—Ç–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    const response = await fetch('/api/users')
    this.users = await response.json()
  }

  async fetchWithRetry(maxRetries = 3) {
    let retries = 0

    while (retries < maxRetries) {
      try {
        await this.fetchUsers.exec()
        return // –£—Å–ø–µ—à–Ω–æ
      } catch (error) {
        retries++
        console.log(`–ü–æ–ø—ã—Ç–∫–∞ ${retries} –∏–∑ ${maxRetries} –Ω–µ —É–¥–∞–ª–∞—Å—å`)

        if (retries >= maxRetries) {
          console.error('–í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã')
          throw error
        }

        // –ñ–¥–µ–º –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
        await new Promise(resolve => setTimeout(resolve, 1000 * retries))
      }
    }
  }
}
```

### –£–º–Ω–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    const response = await fetch('/api/users')
    this.users = await response.json()
  }

  async smartRetry() {
    let retries = 0
    const maxRetries = 3
    const baseDelay = 1000

    while (retries < maxRetries) {
      try {
        await this.fetchUsers.exec()
        return
      } catch (error) {
        retries++
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø –æ—à–∏–±–∫–∏
        if (error instanceof TypeError) {
          // –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ ‚Äî –∂–¥–µ–º –¥–æ–ª—å—à–µ
          await new Promise(resolve => setTimeout(resolve, baseDelay * retries * 2))
        } else if (error.message.includes('500')) {
          // –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî –∂–¥–µ–º –µ—â–µ –¥–æ–ª—å—à–µ
          await new Promise(resolve => setTimeout(resolve, baseDelay * retries * 3))
        } else {
          // –î—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏ ‚Äî –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ–º
          throw error
        }

        if (retries >= maxRetries) {
          throw error
        }
      }
    }
  }
}
```

## –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> { }
  @action async createUser(): Promise<void> { }
  @action async deleteUser(): Promise<void> { }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ—à–∏–±–æ–∫
  get hasAnyErrors(): boolean {
    return this.hasActionWithError
  }

  // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å –æ—à–∏–±–∫–∞–º–∏
  get actionsWithErrors(): string[] {
    const errors = []
    if (this.fetchUsers.isError) errors.push('fetchUsers')
    if (this.createUser.isError) errors.push('createUser')
    if (this.deleteUser.isError) errors.push('deleteUser')
    return errors
  }

  // –°–±—Ä–æ—Å –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
  resetAllErrors(): void {
    if (this.fetchUsers.isError) this.fetchUsers.resetError()
    if (this.createUser.isError) this.createUser.resetError()
    if (this.deleteUser.isError) this.deleteUser.resetError()
  }
}
```

### –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    try {
      const response = await fetch('/api/users')
      this.users = await response.json()
    } catch (error) {
      this.handleError('fetchUsers', error)
      throw error
    }
  }

  private handleError(actionName: string, error: any): void {
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
    console.error(`Error in ${actionName}:`, error)

    // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    this.sendToMonitoring(actionName, error)

    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    this.showNotification(error)
  }

  private sendToMonitoring(actionName: string, error: any): void {
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Sentry)
    if (window.Sentry) {
      window.Sentry.captureException(error, {
        tags: {
          action: actionName,
          model: 'UserModel'
        }
      })
    }
  }

  private showNotification(error: any): void {
    // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    if (window.toast) {
      window.toast.error(error.message)
    }
  }
}
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏
class UserNotFoundError extends Error {
  constructor(userId: number) {
    super(`User with id ${userId} not found`)
    this.name = 'UserNotFoundError'
  }
}

class ValidationError extends Error {
  constructor(field: string, message: string) {
    super(`Validation error in ${field}: ${message}`)
    this.name = 'ValidationError'
  }
}

// ‚ùå –ü–ª–æ—Ö–æ - –æ–±—â–∏–µ –æ—à–∏–±–∫–∏
throw new Error('Something went wrong')
```

### 2. –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    try {
      const response = await fetch('/api/users')
      
      if (!response.ok) {
        throw new Error(`Failed to fetch users: ${response.status} ${response.statusText}`)
      }
      
      this.users = await response.json()
    } catch (error) {
      // ‚úÖ –•–æ—Ä–æ—à–æ - –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      console.error('Failed to fetch users:', error)
      
      // ‚ùå –ü–ª–æ—Ö–æ - –Ω–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      console.error('Error:', error)
      
      throw error
    }
  }
}
```

### 3. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ UI

```vue
<template>
  <div>
    <!-- ‚úÖ –•–æ—Ä–æ—à–æ - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ -->
    <div v-if="userModel.fetchUsers.isError" class="error">
      <div v-if="isNetworkError" class="network-error">
        <h3>–û—à–∏–±–∫–∞ —Å–µ—Ç–∏</h3>
        <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É</p>
        <button @click="retryFetch">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
      </div>
      
      <div v-else class="general-error">
        <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
        <p>{{ userModel.fetchUsers.error?.message }}</p>
        <button @click="retryFetch">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
      </div>
    </div>

    <!-- ‚ùå –ü–ª–æ—Ö–æ - –æ–±—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ -->
    <div v-if="userModel.fetchUsers.isError">
      –û—à–∏–±–∫–∞: {{ userModel.fetchUsers.error?.message }}
    </div>
  </div>
</template>
```

### 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    try {
      const response = await fetch('/api/users')
      this.users = await response.json()
    } catch (error) {
      // ‚úÖ –•–æ—Ä–æ—à–æ - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
      console.error('Failed to fetch users:', {
        error: error.message,
        stack: error.stack,
        timestamp: new Date().toISOString(),
        action: 'fetchUsers'
      })
      
      throw error
    }
  }
}
```

# –°–æ—Å—Ç–æ—è–Ω–∏—è

–°–æ—Å—Ç–æ—è–Ω–∏—è ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è Vue Modeler, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –¥–µ–π—Å—Ç–≤–∏–π –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ UI.

## –û–±–∑–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏–π

–ö–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ Vue Modeler –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º –∏–∑ –ø—è—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π:

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –°–≤–æ–π—Å—Ç–≤–æ |
|-----------|----------|----------|
| **Ready** | –î–µ–π—Å—Ç–≤–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ | `isReady` |
| **Pending** | –î–µ–π—Å—Ç–≤–∏–µ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è | `isPending` |
| **Error** | –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ | `isError` |
| **Abort** | –î–µ–π—Å—Ç–≤–∏–µ –±—ã–ª–æ –æ—Ç–º–µ–Ω–µ–Ω–æ | `isAbort` |
| **Lock** | –î–µ–π—Å—Ç–≤–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ | `isLock` |

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π

### –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    // –õ–æ–≥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
  }

  checkActionState() {
    const action = this.fetchUsers

    if (action.isReady) {
      console.log('–î–µ–π—Å—Ç–≤–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é')
    }

    if (action.isPending) {
      console.log('–î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è')
    }

    if (action.isError) {
      console.log('–û—à–∏–±–∫–∞:', action.error?.message)
    }

    if (action.isAbort) {
      console.log('–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ')
    }

    if (action.isLock) {
      console.log('–î–µ–π—Å—Ç–≤–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ')
    }
  }
}
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    // –õ–æ–≥–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
  }

  checkMultipleStates() {
    const action = this.fetchUsers

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
    if (action.is('pending', 'error')) {
      console.log('–î–µ–π—Å—Ç–≤–∏–µ –ª–∏–±–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ª–∏–±–æ –≤ –æ—à–∏–±–∫–µ')
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (–Ω–µ ready)
    if (action.is('pending', 'error', 'abort', 'lock')) {
      console.log('–î–µ–π—Å—Ç–≤–∏–µ –Ω–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ ready')
    }
  }
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ UI

### –ë–∞–∑–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

```vue
<template>
  <div>
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div v-if="userModel.fetchUsers.isPending" class="loading">
      <span>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</span>
      <button @click="cancelFetch">–û—Ç–º–µ–Ω–∏—Ç—å</button>
    </div>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—à–∏–±–∫–∏ -->
    <div v-else-if="userModel.fetchUsers.isError" class="error">
      <span>–û—à–∏–±–∫–∞: {{ userModel.fetchUsers.error?.message }}</span>
      <button @click="retryFetch">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
    </div>

    <!-- –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç -->
    <div v-else-if="userModel.fetchUsers.isReady" class="success">
      <ul>
        <li v-for="user in userModel.users" :key="user.id">
          {{ user.name }}
        </li>
      </ul>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
    <button 
      @click="fetchUsers"
      :disabled="userModel.fetchUsers.isPending || userModel.fetchUsers.isLock"
    >
      –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    </button>
  </div>
</template>

<script setup lang="ts">
const fetchUsers = async () => {
  await userModel.fetchUsers.exec()
}

const retryFetch = async () => {
  userModel.fetchUsers.resetError()
  await userModel.fetchUsers.exec()
}

const cancelFetch = () => {
  userModel.fetchUsers.abort()
}
</script>
```

### –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

```vue
<template>
  <div class="user-management">
    <!-- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div v-if="userModel.hasPendingActions" class="global-loading">
      –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏...
    </div>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—à–∏–±–æ–∫ -->
    <div v-if="userModel.hasActionWithError" class="global-error">
      –ï—Å—Ç—å –æ—à–∏–±–∫–∏ –≤ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
    </div>

    <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <form @submit.prevent="createUser" class="user-form">
      <input v-model="newUser.name" placeholder="–ò–º—è" required />
      <input v-model="newUser.email" type="email" placeholder="Email" required />
      
      <button 
        type="submit"
        :disabled="userModel.createUser.isPending || userModel.createUser.isLock"
      >
        <span v-if="userModel.createUser.isPending">–°–æ–∑–¥–∞–Ω–∏–µ...</span>
        <span v-else>–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
      </button>
    </form>

    <!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <div class="user-list">
      <div v-for="user in userModel.users" :key="user.id" class="user-item">
        <span>{{ user.name }}</span>
        <button 
          @click="deleteUser(user.id)"
          :disabled="userModel.deleteUser.isPending"
        >
          –£–¥–∞–ª–∏—Ç—å
        </button>
      </div>
    </div>
  </div>
</template>
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π

```typescript
export class UserModel extends ProtoModel {
  @action async submitForm(formData: any): Promise<void> {
    // –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
  }

  async handleFormSubmit(formData: any) {
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
    if (this.submitForm.isLock) {
      console.log('–§–æ—Ä–º–∞ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è')
      return
    }

    await this.submitForm.lock()
    
    try {
      await this.submitForm.exec(formData)
      console.log('–§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ')
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã:', error)
    } finally {
      this.submitForm.unlock()
    }
  }
}
```

### –°–±—Ä–æ—Å –æ—à–∏–±–æ–∫

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> {
    // –õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
  }

  async retryWithReset() {
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
    if (this.fetchUsers.isError) {
      this.fetchUsers.resetError()
    }

    await this.fetchUsers.exec()
  }
}
```

### –û—Ç–º–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–π

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(abortController = new AbortController()): Promise<void> {
    const response = await fetch('/api/users', {
      signal: abortController.signal
    })
    this.users = await response.json()
  }

  async fetchWithTimeout(timeoutMs: number) {
    const abortController = new AbortController()
    const timeoutId = setTimeout(() => {
      abortController.abort('Timeout')
    }, timeoutMs)

    try {
      await this.fetchUsers.exec(abortController)
    } catch (error) {
      if (this.fetchUsers.isAbort) {
        console.log('–ó–∞–ø—Ä–æ—Å –æ—Ç–º–µ–Ω–µ–Ω –ø–æ —Ç–∞–π–º–∞—É—Ç—É')
      }
    } finally {
      clearTimeout(timeoutId)
    }
  }
}
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏–π –º–æ–¥–µ–ª–∏

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> { }
  @action async createUser(): Promise<void> { }
  @action async deleteUser(): Promise<void> { }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—ã–ø–æ–ª–Ω—è—é—â–∏—Ö—Å—è –¥–µ–π—Å—Ç–≤–∏–π
  get hasAnyPendingActions(): boolean {
    return this.hasPendingActions
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ—à–∏–±–æ–∫
  get hasAnyErrors(): boolean {
    return this.hasActionWithError
  }

  // –ü–æ–¥—Å—á–µ—Ç –≤—ã–ø–æ–ª–Ω—è—é—â–∏—Ö—Å—è –¥–µ–π—Å—Ç–≤–∏–π
  get pendingActionsCount(): number {
    let count = 0
    if (this.fetchUsers.isPending) count++
    if (this.createUser.isPending) count++
    if (this.deleteUser.isPending) count++
    return count
  }

  // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å –æ—à–∏–±–∫–∞–º–∏
  get actionsWithErrors(): string[] {
    const errors = []
    if (this.fetchUsers.isError) errors.push('fetchUsers')
    if (this.createUser.isError) errors.push('createUser')
    if (this.deleteUser.isError) errors.push('deleteUser')
    return errors
  }
}
```

### –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> { }
  @action async createUser(): Promise<void> { }

  // –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
  get isLoading(): boolean {
    return this.fetchUsers.isPending || this.createUser.isPending
  }

  // –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—à–∏–±–∫–∏
  get hasErrors(): boolean {
    return this.fetchUsers.isError || this.createUser.isError
  }

  // –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
  get errorMessage(): string | null {
    if (this.fetchUsers.isError) return this.fetchUsers.error?.message
    if (this.createUser.isError) return this.createUser.error?.message
    return null
  }
}
```

## –¢–∏–ø–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π

```typescript
interface ActionState {
  isReady: boolean
  isPending: boolean
  isError: boolean
  isAbort: boolean
  isLock: boolean
  error?: Error
}

interface ModelStates {
  hasPendingActions: boolean
  hasActionWithError: boolean
  pendingActionsCount: number
}

export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> { }

  // –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  checkState(): ActionState {
    const action = this.fetchUsers
    return {
      isReady: action.isReady,
      isPending: action.isPending,
      isError: action.isError,
      isAbort: action.isAbort,
      isLock: action.isLock,
      error: action.error
    }
  }
}
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> { }

  async safeFetch() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º
    if (this.fetchUsers.isPending) {
      console.log('–ó–∞–≥—Ä—É–∑–∫–∞ —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è')
      return
    }

    if (this.fetchUsers.isLock) {
      console.log('–î–µ–π—Å—Ç–≤–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ')
      return
    }

    // –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ
    await this.fetchUsers.exec()
  }
}
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> { }

  async fetchWithRetry(maxRetries = 3) {
    let retries = 0

    while (retries < maxRetries) {
      try {
        await this.fetchUsers.exec()
        return // –£—Å–ø–µ—à–Ω–æ
      } catch (error) {
        retries++
        console.log(`–ü–æ–ø—ã—Ç–∫–∞ ${retries} –∏–∑ ${maxRetries} –Ω–µ —É–¥–∞–ª–∞—Å—å`)

        if (retries >= maxRetries) {
          console.error('–í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã')
          throw error
        }

        // –ñ–¥–µ–º –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
        await new Promise(resolve => setTimeout(resolve, 1000 * retries))
      }
    }
  }
}
```

### 3. –£—Å–ª–æ–≤–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> { }
  @action async createUser(): Promise<void> { }

  async performOperation() {
    // –í—ã–ø–æ–ª–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫
    if (!this.hasActionWithError) {
      await this.fetchUsers.exec()
    } else {
      console.log('–ï—Å—Ç—å –æ—à–∏–±–∫–∏, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é')
    }
  }

  async conditionalCreate() {
    // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
    if (this.fetchUsers.isReady) {
      await this.createUser.exec()
    } else {
      console.log('–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏')
    }
  }
}
```

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

```typescript
export class UserModel extends ProtoModel {
  @action async fetchUsers(): Promise<void> { }

  async autoFetch() {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
    if (this.fetchUsers.isError) {
      this.fetchUsers.resetError()
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –µ—Å–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
    if (this.fetchUsers.isLock) {
      this.fetchUsers.unlock()
    }

    // –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ
    await this.fetchUsers.exec()
  }
}
```

# Example Guide

Guides lead a user through a specific task they want to accomplish, often with a sequence of steps.
Writing a good guide requires thinking about what your users are trying to do.

## Further reading

- Read [about how-to guides](https://diataxis.fr/how-to-guides/) in the Di√°taxis framework
